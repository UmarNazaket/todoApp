<div class="tasks-container">
  <h2 class="tasks-heading">Tasks</h2>
  <div class="logout_btn"><button class="btn" (click)="logout()"><i class="fa fa-sign-out"></i> Logout</button></div>
  <div class="task-header">
    <div class="search-bar">
      <input type="text" placeholder="Search by title" [(ngModel)]="searchQuery"  />
    </div>
    <div class="sort-buttons">
      <button class="sort-button" (click)="this.isEditTask = false; this.showAddComponent = true;">Add New Task <i class="fa fa-plus"></i></button>
    </div>
    <div class="sort-buttons">
      <button class="sort-button" (click)="sortTasks('priority')">Priority <i class="fa fa-sort"></i></button>
      <button class="sort-button" (click)="sortTasks('dueDate')">Due Date <i class="fa fa-sort"></i></button>
      <button class="sort-button" (click)="sortTasks('status')">Status <i class="fa fa-sort"></i></button>
    </div>
  </div>
  <ul class="task-list">
    <li *ngFor="let task of filteredTasks | filterTasks: searchQuery">
      <div class="task-item" [ngStyle]="getTaskItemStyle(task.status)">
        <span>{{ task.title }}</span>
        <span>{{ task.dueDate | date:'dd MMM, yyyy'  }}</span>
        <div class="task-actions">
          <button class="edit-button" (click)="editTask(task)">Edit</button>
          <button class="delete-button" (click)="deleteTask(task._id)">Delete</button>
        </div>
      </div>
    </li>
  </ul>
</div>

<div class="new-task-parent" *ngIf="showAddComponent">
  <div class="new-task-wrapper">
    <app-add-task [isEditTask]="isEditTask" [task]="task" (closePopup)="hideAddComponent($event)"></app-add-task>
  </div>
</div>
